#!/usr/bin/env amber

import { build } from "./build.ab"
import { run } from "./run.ab"

main(args) {
    let i = 0
    for arg in args {
        if arg == "help" {
            echo "Installer for the Benix operating system -- made by Wither__"
            echo "============================================================"
            echo "help                  : display this message"
            echo "version               : display the version of Benix this in"
            echo "                        staller is made for"
            echo "build [subcmd]        : build the Benix source code"
            echo "emulate [subcmd]      : build and run Benix in an emulator"
        }
        if arg == "version" {
            echo "Installer for Benix version 0.0.3"
        }
        if arg == "build" {
            if args[i + 1] == "image" {
                build(args[i + 2])
            } else {
                build("")
            }
        }
        if arg == "emulate" {
            if args[i + 1] == "qemu" {
                run(["qemu"])
            }
        }

        i += 1
    }
}